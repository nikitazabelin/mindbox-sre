# mindbox-sre

## Выполнение исходных требований

| Требование                                                                                   | Реализация                                                                                         |
|----------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Мультизональный кластер (3 зоны), 5 нод                                                  | topologySpreadConstraints равномерно распределяет поды по зонам                                  |
| Приложению нужно 5–10 сек. на инициализацию                                              | Добавлен startupProbe с ожиданием до 20 секунд                                                   |
| 4 пода справляются с пиковой нагрузкой                                                   | HPA масштабируется до 6 подов (с запасом для пиков)                                                |
| На старте нужны ресурсы по CPU, потом ~0.1 CPU / 128Mi                                   | requests: 0.1 CPU / 128Mi, limits: 1 CPU / 256Mi                                                |
| Ночной спад нагрузки, днём пик                                                           | HPA: minReplicas = 2, maxReplicas = 6, масштабирование по CPU                                  |
| Максимальная отказоустойчивость                                                          | - topologySpreadConstraints по зонам<br> - PodDisruptionBudget с minAvailable: 2             |
| Минимальное потребление ресурсов                                                         | - Ночью 2 пода по 0.1 CPU<br> - HPA регулирует по нагрузке                                          |
| Приложение должно открываться в браузере                                                 | Добавлены Ingress + Service, доступ по HTTP через домен                                        |
| Код должен быть доступен без архивов, например, через GitHub                             | Весь манифест в одном deployment.yaml + README.md, удобно для публикации                       |
| Комментарии и объяснения решений                                                         | YAML снабжён комментариями, ключевые решения кратко объяснены в README.md                        |


# My App — Kubernetes Deployment

Готовый Kubernetes-манифест для веб-приложения mindbox с автоскейлингом, отказоустойчивостью и HTTP-доступом через Ingress.

## Компоненты

- Deployment с probes и распределением по зонам
- HPA: масштабирование по CPU
- PodDisruptionBudget: отказоустойчивость при обновлениях
- Service + Ingress: публикация приложения по адресу http://mindbox.example.com

## Быстрый старт

1. Примените все ресурсы:

```bash
kubectl apply -f deployment.yaml
```

2. Убедитесь, что работает Ingress Controller (например, NGINX Ingress).  
3. Настройте DNS:  
```mindbox.example.com → <Ingress Controller IP>```

---

## Подробности

- Порты: 8080 внутри, 80 через Ingress  
- Путь проверки: /health  
- Автоскейлинг: от 2 до 6 подов, при CPU > 50%  
- Ресурсы: 0.1 CPU / 128Mi (request), 1 CPU / 256Mi (limit)  
- Проверки:  
  - startupProbe — до 20 сек. ожидания запуска  
  - readinessProbe — готовность к трафику  
  - livenessProbe — перезапуск при зависании  

---
